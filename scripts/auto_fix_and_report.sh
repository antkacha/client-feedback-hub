#!/bin/bash

# =============================================================================
# Auto Fix and Report Script –¥–ª—è Client Feedback Hub
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–ø—Ä–∞–≤–ª—è—î –∫–æ–¥ —Ç–∞ –≥–µ–Ω–µ—Ä—É—î –∑–≤—ñ—Ç –ø—Ä–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
# =============================================================================

# –ö–æ–ª—å–æ—Ä–∏ –¥–ª—è –≤–∏–≤–æ–¥—É
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m' # No Color

# –§–∞–π–ª –¥–ª—è –∑–≤—ñ—Ç—É
REPORT_FILE="/tmp/test-report.txt"
LOG_FILE="/tmp/auto-fix.log"

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è –∑ –∫–æ–ª—å–æ—Ä–æ–º
log() {
    local color=$1
    local message=$2
    echo -e "${color}${message}${NC}"
    echo "$(date '+%Y-%m-%d %H:%M:%S') - ${message}" >> "$LOG_FILE"
}

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å—É –≤–∏—Ö–æ–¥—É
check_status() {
    local status=$1
    local operation=$2
    
    if [ $status -eq 0 ]; then
        log $GREEN "‚úÖ $operation - –£–°–ü–Ü–®–ù–û"
        echo "‚úÖ $operation - –£–°–ü–Ü–®–ù–û" >> "$REPORT_FILE"
        return 0
    else
        log $RED "‚ùå $operation - –ü–†–û–í–ê–õ"
        echo "‚ùå $operation - –ü–†–û–í–ê–õ" >> "$REPORT_FILE"
        return 1
    fi
}

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó
create_backup() {
    local backup_dir="./backup-$(date +%Y%m%d-%H%M%S)"
    log $BLUE "üì¶ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó –≤ $backup_dir"
    
    # –°—Ç–≤–æ—Ä—é—î–º–æ –ø–∞–ø–∫—É –¥–ª—è backup
    mkdir -p "$backup_dir"
    
    # –ö–æ–ø—ñ—é—î–º–æ –≤–∞–∂–ª–∏–≤—ñ —Ñ–∞–π–ª–∏
    cp -r frontend/src "$backup_dir/frontend-src" 2>/dev/null || true
    cp -r server/src "$backup_dir/server-src" 2>/dev/null || true
    
    echo "–†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞: $backup_dir" >> "$REPORT_FILE"
    log $GREEN "‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞ –∫–æ–ø—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–∞"
}

# –ì–æ–ª–æ–≤–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è
main() {
    log $CYAN "üöÄ –ü–æ—á–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É..."
    
    # –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ —Ñ–∞–π–ª–∏ –∑–≤—ñ—Ç—ñ–≤
    > "$REPORT_FILE"
    > "$LOG_FILE"
    
    echo "=== AUTO FIX AND REPORT ===" >> "$REPORT_FILE"
    echo "–ß–∞—Å –∑–∞–ø—É—Å–∫—É: $(date)" >> "$REPORT_FILE"
    echo "–ü—Ä–æ–µ–∫—Ç: Client Feedback Hub" >> "$REPORT_FILE"
    echo "=============================" >> "$REPORT_FILE"
    echo "" >> "$REPORT_FILE"
    
    # –°—Ç–≤–æ—Ä—é—î–º–æ —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é
    create_backup
    
    # =============================================================================
    # –ö–†–û–ö 1: ESLint –∞–≤—Ç–æ—Ñ—ñ–∫—Å
    # =============================================================================
    
    log $YELLOW "üîß –ö–†–û–ö 1: –ó–∞–ø—É—Å–∫ ESLint –∞–≤—Ç–æ—Ñ—ñ–∫—Å—É..."
    echo "" >> "$REPORT_FILE"
    echo "1. ESLint –ê–≤—Ç–æ—Ñ—ñ–∫—Å:" >> "$REPORT_FILE"
    
    npm run lint:fix >> "$LOG_FILE" 2>&1
    local lint_status=$?
    
    if check_status $lint_status "ESLint –∞–≤—Ç–æ—Ñ—ñ–∫—Å"; then
        # –Ø–∫—â–æ ESLint –ø—Ä–æ–π—à–æ–≤, –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –∑–∞–ª–∏—à–∏–ª–∏—Å—å –ø–æ–º–∏–ª–∫–∏
        log $BLUE "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ª–∏—à–∫–æ–≤–∏—Ö –ø–æ–º–∏–ª–æ–∫ ESLint..."
        npm run lint >> "$LOG_FILE" 2>&1
        local lint_check_status=$?
        
        if [ $lint_check_status -eq 0 ]; then
            log $GREEN "‚ú® ESLint: –í—Å—ñ –ø–æ–º–∏–ª–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ!"
            echo "   ‚ú® –í—Å—ñ –ø–æ–º–∏–ª–∫–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ" >> "$REPORT_FILE"
        else
            log $YELLOW "‚ö†Ô∏è ESLint: –ó–∞–ª–∏—à–∏–ª–∏—Å—å –ø–æ–º–∏–ª–∫–∏ —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è"
            echo "   ‚ö†Ô∏è –ó–∞–ª–∏—à–∏–ª–∏—Å—å –ø–æ–º–∏–ª–∫–∏ —è–∫—ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å —Ä—É—á–Ω–æ–≥–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è" >> "$REPORT_FILE"
        fi
    fi
    
    # =============================================================================
    # –ö–†–û–ö 2: Prettier —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
    # =============================================================================
    
    log $YELLOW "üíÖ –ö–†–û–ö 2: –ó–∞–ø—É—Å–∫ Prettier —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è..."
    echo "" >> "$REPORT_FILE"
    echo "2. Prettier –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è:" >> "$REPORT_FILE"
    
    npm run format >> "$LOG_FILE" 2>&1
    local format_status=$?
    
    if check_status $format_status "Prettier —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è"; then
        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –≤—Å–µ –≤—ñ–¥—Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
        log $BLUE "üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è..."
        npm run format:check >> "$LOG_FILE" 2>&1
        local format_check_status=$?
        
        if [ $format_check_status -eq 0 ]; then
            log $GREEN "‚ú® Prettier: –ö–æ–¥ –≤—ñ–¥—Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!"
            echo "   ‚ú® –ö–æ–¥ –≤—ñ–¥—Ñ–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ" >> "$REPORT_FILE"
        else
            log $YELLOW "‚ö†Ô∏è Prettier: –î–µ—è–∫—ñ —Ñ–∞–π–ª–∏ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —Å—Ç–∏–ª—é —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è"
            echo "   ‚ö†Ô∏è –î–µ—è–∫—ñ —Ñ–∞–π–ª–∏ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —Å—Ç–∏–ª—é —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è" >> "$REPORT_FILE"
        fi
    fi
    
    # =============================================================================
    # –ö–†–û–ö 3: TypeScript –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
    # =============================================================================
    
    log $YELLOW "üîß –ö–†–û–ö 3: –ó–∞–ø—É—Å–∫ TypeScript –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏..."
    echo "" >> "$REPORT_FILE"
    echo "3. TypeScript Type Check:" >> "$REPORT_FILE"
    
    npm run typecheck >> "$LOG_FILE" 2>&1
    local typecheck_status=$?
    
    if check_status $typecheck_status "TypeScript –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞"; then
        log $GREEN "‚ú® TypeScript: –í—Å—ñ —Ç–∏–ø–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ñ!"
        echo "   ‚ú® –í—Å—ñ —Ç–∏–ø–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ñ" >> "$REPORT_FILE"
    else
        log $RED "üí• TypeScript: –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ —Ç–∏–ø—ñ–≤!"
        echo "   üí• –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–∫–∏ —Ç–∏–ø—ñ–≤ (–¥–∏–≤. –ª–æ–≥ —Ñ–∞–π–ª)" >> "$REPORT_FILE"
        
        # –î–æ–¥–∞—î–º–æ –ø–æ–º–∏–ª–∫–∏ —Ç–∏–ø—ñ–≤ –¥–æ –∑–≤—ñ—Ç—É
        echo "" >> "$REPORT_FILE"
        echo "   –ü–æ–º–∏–ª–∫–∏ TypeScript:" >> "$REPORT_FILE"
        npm run typecheck 2>&1 | tail -20 >> "$REPORT_FILE"
    fi
    
    # =============================================================================
    # –ö–†–û–ö 4: –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤
    # =============================================================================
    
    log $YELLOW "üß™ –ö–†–û–ö 4: –ó–∞–ø—É—Å–∫ unit —Ç–µ—Å—Ç—ñ–≤..."
    echo "" >> "$REPORT_FILE"
    echo "4. Unit Tests:" >> "$REPORT_FILE"
    
    # –ó–∞–ø—É—Å–∫–∞—î–º–æ —Ç–µ—Å—Ç–∏ –≤ CI —Ä–µ–∂–∏–º—ñ (–±–µ–∑ watch)
    npm run test:ci >> "$LOG_FILE" 2>&1
    local test_status=$?
    
    if check_status $test_status "Unit —Ç–µ—Å—Ç–∏"; then
        log $GREEN "‚ú® –¢–µ—Å—Ç–∏: –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏!"
        echo "   ‚ú® –í—Å—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–π—à–ª–∏" >> "$REPORT_FILE"
        
        # –î–æ–¥–∞—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–µ—Å—Ç—ñ–≤
        echo "" >> "$REPORT_FILE"
        echo "   –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç—ñ–≤:" >> "$REPORT_FILE"
        npm run test:ci 2>&1 | grep -E "(Tests:|Suites:|Time:|Coverage:)" >> "$REPORT_FILE" || true
    else
        log $RED "üí• –¢–µ—Å—Ç–∏: –î–µ—è–∫—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å!"
        echo "   üí• –î–µ—è–∫—ñ —Ç–µ—Å—Ç–∏ –ø—Ä–æ–≤–∞–ª–∏–ª–∏—Å—å" >> "$REPORT_FILE"
        
        # –î–æ–¥–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ–≤–∞–ª–µ–Ω—ñ —Ç–µ—Å—Ç–∏
        echo "" >> "$REPORT_FILE"
        echo "   –ü—Ä–æ–≤–∞–ª–µ–Ω—ñ —Ç–µ—Å—Ç–∏:" >> "$REPORT_FILE"
        npm run test:ci 2>&1 | grep -A 5 -B 5 "FAIL\|FAILED" >> "$REPORT_FILE" || true
    fi
    
    # =============================================================================
    # –ö–†–û–ö 5: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–≤—ñ—Ç—É
    # =============================================================================
    
    log $PURPLE "üìä –ö–†–û–ö 5: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–≤—ñ—Ç—É..."
    
    # –†–∞—Ö—É—î–º–æ –∑–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å
    local total_errors=0
    if [ $lint_status -ne 0 ]; then ((total_errors++)); fi
    if [ $format_status -ne 0 ]; then ((total_errors++)); fi
    if [ $typecheck_status -ne 0 ]; then ((total_errors++)); fi
    if [ $test_status -ne 0 ]; then ((total_errors++)); fi
    
    echo "" >> "$REPORT_FILE"
    echo "=============================" >> "$REPORT_FILE"
    echo "–ü–Ü–î–°–£–ú–û–ö:" >> "$REPORT_FILE"
    echo "=============================" >> "$REPORT_FILE"
    echo "–ß–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è: $(date)" >> "$REPORT_FILE"
    echo "–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫: $total_errors" >> "$REPORT_FILE"
    
    if [ $total_errors -eq 0 ]; then
        log $GREEN "üéâ –í–°–Ü –ü–ï–†–ï–í–Ü–†–ö–ò –ü–†–û–ô–®–õ–ò –£–°–ü–Ü–®–ù–û!"
        echo "–°—Ç–∞—Ç—É—Å: ‚úÖ –í–°–ï –î–û–ë–†–ï - –≥–æ—Ç–æ–≤–Ω–æ –¥–æ –∫–æ–º—ñ—Ç—É!" >> "$REPORT_FILE"
        echo "" >> "$REPORT_FILE"
        echo "üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:" >> "$REPORT_FILE"
        echo "‚Ä¢ –ú–æ–∂–µ—Ç–µ —Ä–æ–±–∏—Ç–∏ commit —Ç–∞ push" >> "$REPORT_FILE"
        echo "‚Ä¢ –ö–æ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤—Å—ñ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø—Ä–æ–µ–∫—Ç—É" >> "$REPORT_FILE"
    else
        log $RED "‚ö†Ô∏è –ó–ù–ê–ô–î–ï–ù–û –ü–†–û–ë–õ–ï–ú–ò - –ü–û–¢–†–Ü–ë–ù–ï –†–£–ß–ù–ï –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø"
        echo "–°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ü–û–¢–†–Ü–ë–ù–Ü –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø" >> "$REPORT_FILE"
        echo "" >> "$REPORT_FILE"
        echo "üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:" >> "$REPORT_FILE"
        echo "‚Ä¢ –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –ø–æ–º–∏–ª–∫–∏ –≤–∏—â–µ" >> "$REPORT_FILE"
        echo "‚Ä¢ –í–∏–ø—Ä–∞–≤—Ç–µ –ø–æ–º–∏–ª–∫–∏ –≤—Ä—É—á–Ω—É" >> "$REPORT_FILE"
        echo "‚Ä¢ –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ" >> "$REPORT_FILE"
        echo "‚Ä¢ –ü—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ –≤—ñ–¥–∫–∞—Ç—ñ—Ç—å—Å—è –¥–æ backup –≤–µ—Ä—Å—ñ—ó" >> "$REPORT_FILE"
    fi
    
    echo "" >> "$REPORT_FILE"
    echo "üìÅ –§–∞–π–ª–∏ –ª–æ–≥—ñ–≤:" >> "$REPORT_FILE"
    echo "‚Ä¢ –î–µ—Ç–∞–ª—å–Ω–∏–π –ª–æ–≥: $LOG_FILE" >> "$REPORT_FILE"
    echo "‚Ä¢ –ó–≤—ñ—Ç: $REPORT_FILE" >> "$REPORT_FILE"
    
    # –í–∏–≤–æ–¥–∏–º–æ –∑–≤—ñ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å
    log $CYAN "üìÑ –ó–í–Ü–¢ –°–¢–í–û–†–ï–ù–û: $REPORT_FILE"
    log $BLUE "üìã –ü–æ–∫–∞–∑—É—é –∑–≤—ñ—Ç:"
    echo ""
    cat "$REPORT_FILE"
    
    # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–æ–¥ –≤–∏—Ö–æ–¥—É
    if [ $total_errors -eq 0 ]; then
        exit 0
    else
        exit 1
    fi
}

# –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–æ–∫–∞–∑—É –¥–æ–ø–æ–º–æ–≥–∏
show_help() {
    echo "–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: $0 [–æ–ø—Ü—ñ—ó]"
    echo ""
    echo "–û–ø—Ü—ñ—ó:"
    echo "  -h, --help     –ü–æ–∫–∞–∑–∞—Ç–∏ —Ü—é –¥–æ–≤—ñ–¥–∫—É"
    echo "  -v, --verbose  –î–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥"
    echo "  --no-backup    –ù–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω—É –∫–æ–ø—ñ—é"
    echo "  --only-lint    –¢—ñ–ª—å–∫–∏ –ª—ñ–Ω—Ç–∏–Ω–≥ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è"
    echo "  --only-test    –¢—ñ–ª—å–∫–∏ —Ç–µ—Å—Ç–∏"
    echo ""
    echo "–ü—Ä–∏–∫–ª–∞–¥–∏:"
    echo "  $0                 # –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è"
    echo "  $0 --only-lint     # –¢—ñ–ª—å–∫–∏ –ª—ñ–Ω—Ç–∏–Ω–≥"
    echo "  $0 --no-backup     # –ë–µ–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ—ó –∫–æ–ø—ñ—ó"
}

# –û–±—Ä–æ–±–∫–∞ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
VERBOSE=false
NO_BACKUP=false
ONLY_LINT=false
ONLY_TEST=false

while [[ $# -gt 0 ]]; do
    case $1 in
        -h|--help)
            show_help
            exit 0
            ;;
        -v|--verbose)
            VERBOSE=true
            shift
            ;;
        --no-backup)
            NO_BACKUP=true
            shift
            ;;
        --only-lint)
            ONLY_LINT=true
            shift
            ;;
        --only-test)
            ONLY_TEST=true
            shift
            ;;
        *)
            echo "–ù–µ–≤—ñ–¥–æ–º–∞ –æ–ø—Ü—ñ—è: $1"
            show_help
            exit 1
            ;;
    esac
done

# –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –º–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
if [ ! -f "package.json" ]; then
    log $RED "‚ùå –ü–æ–º–∏–ª–∫–∞: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –∑ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ–µ–∫—Ç—É"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥–æ–ª–æ–≤–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é
main