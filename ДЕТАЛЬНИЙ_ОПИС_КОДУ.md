# üìù –î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –∫–æ–¥—É –ø–æ —Ñ–∞–π–ª–∞—Ö

> –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π —Ä–æ–∑–±—ñ—Ä –∫–æ–∂–Ω–æ–≥–æ –≤–∞–∂–ª–∏–≤–æ–≥–æ —Ñ–∞–π–ª—É –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º–∏ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é

## üìã –ó–º—ñ—Å—Ç

1. [Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏](#frontend-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏)
2. [Frontend —Å—Ç–æ—Ä—ñ–Ω–∫–∏](#frontend-—Å—Ç–æ—Ä—ñ–Ω–∫–∏)
3. [Backend –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏](#backend-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏)
4. [API –º–∞—Ä—à—Ä—É—Ç–∏](#api-–º–∞—Ä—à—Ä—É—Ç–∏)
5. [–°–µ—Ä–≤—ñ—Å–∏ —Ç–∞ —É—Ç–∏–ª—ñ—Ç–∏](#—Å–µ—Ä–≤—ñ—Å–∏-—Ç–∞-—É—Ç–∏–ª—ñ—Ç–∏)
6. [–¢–∏–ø–∏ —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏](#—Ç–∏–ø–∏-—Ç–∞-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏)

---

## üé® Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### üìÑ `/frontend/src/components/LoginForm.tsx`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º–∏ –≤—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ —Å–∏—Å—Ç–µ–º—É.

#### –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –∫–æ–¥—É:

```typescript
import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { useAuth } from '../contexts/AuthContext'

/**
 * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç LoginForm - —Ñ–æ—Ä–º–∞ –¥–ª—è –≤—Ö–æ–¥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
 * 
 * –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:
 * - –ü–æ–ª—è –¥–ª—è email —Ç–∞ –ø–∞—Ä–æ–ª—é
 * - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ
 * - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
 * - –†–µ–¥—ñ—Ä–µ–∫—Ç –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É
 * - Loading —Å—Ç–∞–Ω –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Ç—É
 */
export function LoginForm() {
  // ---------- STATE ----------
  
  // –õ–æ–∫–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω –¥–ª—è –ø–æ–ª—ñ–≤ —Ñ–æ—Ä–º–∏
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  
  // –°—Ç–∞–Ω –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
  const [error, setError] = useState('')
  
  // –°—Ç–∞–Ω –¥–ª—è —ñ–Ω–¥–∏–∫–∞—Ü—ñ—ó –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  const [isLoading, setIsLoading] = useState(false)

  // ---------- HOOKS ----------
  
  // –•—É–∫ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é
  const { login } = useAuth()
  
  // –•—É–∫ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ—ó –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
  const navigate = useNavigate()

  // ---------- HANDLERS ----------
  
  /**
   * –û–±—Ä–æ–±–Ω–∏–∫ submit —Ñ–æ—Ä–º–∏
   * @param e - Event –æ–±'—î–∫—Ç —Ñ–æ—Ä–º–∏
   */
  const handleSubmit = async (e: React.FormEvent) => {
    // –ó–∞–ø–æ–±—ñ–≥–∞—î–º–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    e.preventDefault()
    
    // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –ø–æ–º–∏–ª–∫–∏
    setError('')
    
    // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ
    if (!email || !password) {
      setError('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è')
      return
    }
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É email
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    if (!emailRegex.test(email)) {
      setError('–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email')
      return
    }
    
    try {
      // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
      setIsLoading(true)
      
      // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –≤—Ö–æ–¥—É –∑ AuthContext
      await login(email, password)
      
      // –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ dashboard
      navigate('/dashboard')
      
    } catch (err: any) {
      // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –≤—ñ–¥ API
      setError(err.message || '–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –¥–∞–Ω—ñ.')
    } finally {
      // –ó–∞–≤–∂–¥–∏ –≤–∏–º–∏–∫–∞—î–º–æ loading —Å—Ç–∞–Ω
      setIsLoading(false)
    }
  }

  // ---------- RENDER ----------
  
  return (
    <div className="login-form-container">
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ */}
      <h2 className="text-2xl font-bold text-gray-900 mb-6">
        –í—Ö—ñ–¥ –¥–æ —Å–∏—Å—Ç–µ–º–∏
      </h2>
      
      {/* –§–æ—Ä–º–∞ */}
      <form onSubmit={handleSubmit} className="space-y-4">
        
        {/* –ü–æ–ª–µ Email */}
        <div>
          <label 
            htmlFor="email" 
            className="block text-sm font-medium text-gray-700 mb-1"
          >
            Email –∞–¥—Ä–µ—Å–∞
          </label>
          <input
            id="email"
            type="email"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg 
                       focus:ring-2 focus:ring-blue-500 focus:border-transparent
                       disabled:bg-gray-100 disabled:cursor-not-allowed"
            placeholder="your@email.com"
            disabled={isLoading}
            required
          />
        </div>

        {/* –ü–æ–ª–µ Password */}
        <div>
          <label 
            htmlFor="password" 
            className="block text-sm font-medium text-gray-700 mb-1"
          >
            –ü–∞—Ä–æ–ª—å
          </label>
          <input
            id="password"
            type="password"
            value={password}
            onChange={(e) => setPassword(e.target.value)}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg 
                       focus:ring-2 focus:ring-blue-500 focus:border-transparent
                       disabled:bg-gray-100 disabled:cursor-not-allowed"
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            disabled={isLoading}
            required
          />
        </div>

        {/* –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ */}
        {error && (
          <div className="p-3 bg-red-50 border border-red-200 rounded-lg">
            <p className="text-sm text-red-600">{error}</p>
          </div>
        )}

        {/* –ö–Ω–æ–ø–∫–∞ Submit */}
        <button
          type="submit"
          disabled={isLoading}
          className="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 
                     text-white font-medium rounded-lg
                     disabled:opacity-50 disabled:cursor-not-allowed
                     transition-colors duration-200"
        >
          {/* –ü–æ–∫–∞–∑—É—î–º–æ —Ä—ñ–∑–Ω–∏–π —Ç–µ–∫—Å—Ç –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—Ç–∞–Ω—É */}
          {isLoading ? (
            <span className="flex items-center justify-center">
              <svg className="animate-spin -ml-1 mr-3 h-5 w-5" /* ... */>
                {/* SVG —Å–ø—ñ–Ω–µ—Ä–∞ */}
              </svg>
              –í—Ö—ñ–¥...
            </span>
          ) : (
            '–£–≤—ñ–π—Ç–∏'
          )}
        </button>
      </form>

      {/* –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é */}
      <div className="mt-4 text-center">
        <p className="text-sm text-gray-600">
          –ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç—É?{' '}
          <button
            onClick={() => navigate('/auth?mode=register')}
            className="text-blue-600 hover:text-blue-700 font-medium"
          >
            –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è
          </button>
        </p>
      </div>
    </div>
  )
}
```

**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

1. **–ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω–æ–º:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î useState –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —Ñ–æ—Ä–º–∏
2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä—è—î –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ—Å—Ç—å –ø–æ–ª—ñ–≤ —Ç–∞ —Ñ–æ—Ä–º–∞—Ç email
3. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:** –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –ø–æ–º–∏–ª–∫–∏ –≤—ñ–¥ API
4. **UX:** –ü–æ–∫–∞–∑—É—î loading —Å—Ç–∞–Ω —Ç–∞ –¥–∏–∑–µ–π–±–ª–∏—Ç—å —Ñ–æ—Ä–º—É –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Ç—É
5. **Accessibility:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ label —Ç–∞ id –¥–ª—è –ø–æ–ª—ñ–≤
6. **–°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è:** TailwindCSS –∫–ª–∞—Å–∏ –¥–ª—è responsive –¥–∏–∑–∞–π–Ω—É

---

### üìÑ `/frontend/src/components/RegisterForm.tsx`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

#### –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –∫–æ–¥—É:

```typescript
import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { useAuth } from '../contexts/AuthContext'

/**
 * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç RegisterForm - —Ñ–æ—Ä–º–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
 * 
 * –í—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ –≤—ñ–¥ LoginForm:
 * - –î–æ–¥–∞—Ç–∫–æ–≤—ñ –ø–æ–ª—è (—ñ–º'—è, –ø—Ä—ñ–∑–≤–∏—â–µ)
 * - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
 * - –°–∫–ª–∞–¥–Ω—ñ—à–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
 * - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤—Ö—ñ–¥ –ø—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
 */
export function RegisterForm() {
  // ---------- STATE ----------
  
  // –î–∞–Ω—ñ —Ñ–æ—Ä–º–∏
  const [formData, setFormData] = useState({
    firstName: '',
    lastName: '',
    email: '',
    password: '',
    confirmPassword: ''
  })
  
  const [error, setError] = useState('')
  const [isLoading, setIsLoading] = useState(false)

  const { register } = useAuth()
  const navigate = useNavigate()

  // ---------- HANDLERS ----------
  
  /**
   * –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤ —Ñ–æ—Ä–º–∏
   * –û–Ω–æ–≤–ª—é—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –ø–æ–ª–µ –≤ formData
   */
  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target
    setFormData(prev => ({
      ...prev,
      [name]: value
    }))
  }

  /**
   * –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏
   * @returns true —è–∫—â–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ
   */
  const validateForm = (): boolean => {
    const { firstName, lastName, email, password, confirmPassword } = formData
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–ø–æ–≤–Ω–µ–Ω–æ—Å—Ç—ñ –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤
    if (!firstName || !lastName || !email || !password || !confirmPassword) {
      setError('–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è')
      return false
    }
    
    // –í–∞–ª—ñ–¥–∞—Ü—ñ—è —ñ–º–µ–Ω—ñ (–º—ñ–Ω—ñ–º—É–º 2 —Å–∏–º–≤–æ–ª–∏)
    if (firstName.length < 2 || lastName.length < 2) {
      setError('–Ü–º\'—è —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–µ –ø–æ–≤–∏–Ω–Ω—ñ –º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 2 —Å–∏–º–≤–æ–ª–∏')
      return false
    }
    
    // –í–∞–ª—ñ–¥–∞—Ü—ñ—è email
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    if (!emailRegex.test(email)) {
      setError('–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email')
      return false
    }
    
    // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—é (–º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤)
    if (password.length < 6) {
      setError('–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤')
      return false
    }
    
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
    if (password !== confirmPassword) {
      setError('–ü–∞—Ä–æ–ª—ñ –Ω–µ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å')
      return false
    }
    
    return true
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    
    // –ó–∞–ø—É—Å–∫–∞—î–º–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é
    if (!validateForm()) {
      return
    }
    
    try {
      setIsLoading(true)
      
      // –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
      await register({
        firstName: formData.firstName,
        lastName: formData.lastName,
        email: formData.email,
        password: formData.password
      })
      
      // –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—Ö–æ–¥–∏–º–æ
      // —Ç–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –Ω–∞ dashboard
      navigate('/dashboard')
      
    } catch (err: any) {
      // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –≤—ñ–¥ API
      if (err.message.includes('email')) {
        setError('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º email –≤–∂–µ —ñ—Å–Ω—É—î')
      } else {
        setError(err.message || '–ü–æ–º–∏–ª–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó')
      }
    } finally {
      setIsLoading(false)
    }
  }

  // ---------- RENDER ----------
  
  return (
    <div className="register-form-container">
      <h2 className="text-2xl font-bold text-gray-900 mb-6">
        –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç
      </h2>
      
      <form onSubmit={handleSubmit} className="space-y-4">
        
        {/* –ü–æ–ª—è —ñ–º–µ–Ω—ñ —Ç–∞ –ø—Ä—ñ–∑–≤–∏—â–∞ –≤ –æ–¥–Ω–æ–º—É —Ä—è–¥–∫—É */}
        <div className="grid grid-cols-2 gap-4">
          <div>
            <label htmlFor="firstName" className="block text-sm font-medium text-gray-700 mb-1">
              –Ü–º'—è
            </label>
            <input
              id="firstName"
              name="firstName"
              type="text"
              value={formData.firstName}
              onChange={handleChange}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg..."
              placeholder="–Ü–≤–∞–Ω"
              disabled={isLoading}
              required
            />
          </div>

          <div>
            <label htmlFor="lastName" className="block text-sm font-medium text-gray-700 mb-1">
              –ü—Ä—ñ–∑–≤–∏—â–µ
            </label>
            <input
              id="lastName"
              name="lastName"
              type="text"
              value={formData.lastName}
              onChange={handleChange}
              className="w-full px-4 py-2 border border-gray-300 rounded-lg..."
              placeholder="–ü–µ—Ç—Ä–µ–Ω–∫–æ"
              disabled={isLoading}
              required
            />
          </div>
        </div>

        {/* Email */}
        <div>
          <label htmlFor="email" className="block text-sm font-medium text-gray-700 mb-1">
            Email –∞–¥—Ä–µ—Å–∞
          </label>
          <input
            id="email"
            name="email"
            type="email"
            value={formData.email}
            onChange={handleChange}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg..."
            placeholder="ivan@example.com"
            disabled={isLoading}
            required
          />
        </div>

        {/* Password */}
        <div>
          <label htmlFor="password" className="block text-sm font-medium text-gray-700 mb-1">
            –ü–∞—Ä–æ–ª—å
          </label>
          <input
            id="password"
            name="password"
            type="password"
            value={formData.password}
            onChange={handleChange}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg..."
            placeholder="–ú—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤"
            disabled={isLoading}
            required
          />
        </div>

        {/* Confirm Password */}
        <div>
          <label htmlFor="confirmPassword" className="block text-sm font-medium text-gray-700 mb-1">
            –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
          </label>
          <input
            id="confirmPassword"
            name="confirmPassword"
            type="password"
            value={formData.confirmPassword}
            onChange={handleChange}
            className="w-full px-4 py-2 border border-gray-300 rounded-lg..."
            placeholder="–ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å"
            disabled={isLoading}
            required
          />
        </div>

        {/* –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ */}
        {error && (
          <div className="p-3 bg-red-50 border border-red-200 rounded-lg">
            <p className="text-sm text-red-600">{error}</p>
          </div>
        )}

        {/* Submit –∫–Ω–æ–ø–∫–∞ */}
        <button
          type="submit"
          disabled={isLoading}
          className="w-full py-2 px-4 bg-blue-600 hover:bg-blue-700..."
        >
          {isLoading ? '–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è...' : '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è'}
        </button>
      </form>

      {/* –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –≤—Ö—ñ–¥ */}
      <div className="mt-4 text-center">
        <p className="text-sm text-gray-600">
          –í–∂–µ —î –∞–∫–∞—É–Ω—Ç?{' '}
          <button
            onClick={() => navigate('/auth?mode=login')}
            className="text-blue-600 hover:text-blue-700 font-medium"
          >
            –£–≤—ñ–π—Ç–∏
          </button>
        </p>
      </div>
    </div>
  )
}
```

**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

1. **–°–∫–ª–∞–¥–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤, —Ñ–æ—Ä–º–∞—Ç—É, –¥–æ–≤–∂–∏–Ω–∏, —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è
2. **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π handler:** handleChange –æ–±—Ä–æ–±–ª—è—î –≤—Å—ñ –ø–æ–ª—è —á–µ—Ä–µ–∑ name –∞—Ç—Ä–∏–±—É—Ç
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ:** formData –æ–±'—î–∫—Ç –∑–∞–º—ñ—Å—Ç—å –æ–∫—Ä–µ–º–∏—Ö useState
4. **Grid layout:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è TailwindCSS grid –¥–ª—è —ñ–º–µ–Ω—ñ/–ø—Ä—ñ–∑–≤–∏—â–∞
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤—Ö—ñ–¥:** –ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ–¥—Ä–∞–∑—É –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–π

---

## üìÑ Frontend —Å—Ç–æ—Ä—ñ–Ω–∫–∏

### üìÑ `/frontend/src/pages/ProjectsPage.tsx`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –°—Ç–æ—Ä—ñ–Ω–∫–∞ –∑—ñ —Å–ø–∏—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –ø–æ—à—É–∫–æ–º —Ç–∞ CRUD –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏.

#### –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –∫–æ–¥—É:

```typescript
import React, { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { useProjects, useCreateProject, useDeleteProject } from '../hooks/useProjects'
import { useDebounce } from '../hooks/useDebounce'
import { ProjectCard } from '../components/ui/ProjectCard'
import { CreateProjectModal } from '../components/ui/CreateProjectModal'

/**
 * –°—Ç–æ—Ä—ñ–Ω–∫–∞ ProjectsPage - —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
 * 
 * –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:
 * - –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤ —É –≤–∏–≥–ª—è–¥—ñ –∫–∞—Ä—Ç–æ–∫
 * - –ü–æ—à—É–∫ –ø–æ –Ω–∞–∑–≤—ñ –ø—Ä–æ–µ–∫—Ç—É (–∑ debounce)
 * - –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
 * - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É
 * - –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
 * - –í–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
 * - –ü–µ—Ä–µ—Ö—ñ–¥ –¥–æ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—Ä–æ–µ–∫—Ç—É
 * - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è
 */
export function ProjectsPage() {
  // ---------- STATE ----------
  
  // –õ–æ–∫–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω –¥–ª—è UI
  const [searchQuery, setSearchQuery] = useState('')
  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'archived'>('all')
  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false)
  const [currentPage, setCurrentPage] = useState(1)
  const [selectedProject, setSelectedProject] = useState(null)

  // ---------- HOOKS ----------
  
  const navigate = useNavigate()
  
  // Debounce –¥–ª—è –ø–æ—à—É–∫—É (–∑–∞–ø–æ–±—ñ–≥–∞—î –∑–∞–π–≤–∏–º –∑–∞–ø–∏—Ç–∞–º)
  const debouncedSearch = useDebounce(searchQuery, 500)
  
  // React Query —Ö—É–∫–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏
  const { 
    data: projectsData, 
    isLoading, 
    error 
  } = useProjects({
    search: debouncedSearch,
    status: statusFilter,
    page: currentPage,
    perPage: 12
  })
  
  // Mutation –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
  const createMutation = useCreateProject()
  
  // Mutation –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
  const deleteMutation = useDeleteProject()

  // ---------- HANDLERS ----------
  
  /**
   * –û–±—Ä–æ–±–Ω–∏–∫ –ø–æ—à—É–∫—É
   */
  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setSearchQuery(e.target.value)
    setCurrentPage(1) // –°–∫–∏–¥–∞—î–º–æ –Ω–∞ –ø–µ—Ä—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø—Ä–∏ –Ω–æ–≤–æ–º—É –ø–æ—à—É–∫—É
  }

  /**
   * –û–±—Ä–æ–±–Ω–∏–∫ –∑–º—ñ–Ω–∏ —Ñ—ñ–ª—å—Ç—Ä—É
   */
  const handleFilterChange = (filter: 'all' | 'active' | 'archived') => {
    setStatusFilter(filter)
    setCurrentPage(1)
  }

  /**
   * –û–±—Ä–æ–±–Ω–∏–∫ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
   */
  const handleCreateProject = async (data: CreateProjectDTO) => {
    try {
      await createMutation.mutateAsync(data)
      setIsCreateModalOpen(false)
      // React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
    } catch (error) {
      console.error('Failed to create project:', error)
    }
  }

  /**
   * –û–±—Ä–æ–±–Ω–∏–∫ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
   */
  const handleDeleteProject = async (projectId: string) => {
    // –ü–æ–∫–∞–∑—É—î–º–æ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è
    if (!window.confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –ø—Ä–æ–µ–∫—Ç?')) {
      return
    }
    
    try {
      await deleteMutation.mutateAsync(projectId)
    } catch (error) {
      console.error('Failed to delete project:', error)
    }
  }

  /**
   * –û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –Ω–∞ –ø—Ä–æ–µ–∫—Ç - –ø–µ—Ä–µ—Ö—ñ–¥ –¥–æ –¥–µ—Ç–∞–ª–µ–π
   */
  const handleProjectClick = (projectId: string) => {
    navigate(`/projects/${projectId}`)
  }

  // ---------- RENDER ----------
  
  return (
    <div className="projects-page-container min-h-screen bg-gray-50">
      {/* Header */}
      <div className="bg-white shadow-sm">
        <div className="max-w-7xl mx-auto px-4 py-6">
          <div className="flex justify-between items-center">
            <h1 className="text-3xl font-bold text-gray-900">
              –ú–æ—ó –ø—Ä–æ–µ–∫—Ç–∏
            </h1>
            <button
              onClick={() => setIsCreateModalOpen(true)}
              className="px-4 py-2 bg-blue-600 hover:bg-blue-700 
                         text-white rounded-lg font-medium
                         transition-colors duration-200"
            >
              + –ù–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç
            </button>
          </div>
        </div>
      </div>

      {/* Filters and Search */}
      <div className="max-w-7xl mx-auto px-4 py-6">
        <div className="flex gap-4 items-center mb-6">
          {/* –ü–æ—à—É–∫ */}
          <div className="flex-1">
            <input
              type="text"
              value={searchQuery}
              onChange={handleSearchChange}
              placeholder="üîç –ü–æ—à—É–∫ –ø—Ä–æ–µ–∫—Ç—ñ–≤..."
              className="w-full px-4 py-2 border border-gray-300 rounded-lg
                         focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            />
          </div>

          {/* –§—ñ–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É */}
          <div className="flex gap-2">
            {['all', 'active', 'archived'].map((filter) => (
              <button
                key={filter}
                onClick={() => handleFilterChange(filter as any)}
                className={`px-4 py-2 rounded-lg font-medium transition-colors
                  ${statusFilter === filter 
                    ? 'bg-blue-600 text-white' 
                    : 'bg-white text-gray-700 hover:bg-gray-100'
                  }`}
              >
                {filter === 'all' ? '–í—Å—ñ' : 
                 filter === 'active' ? '–ê–∫—Ç–∏–≤–Ω—ñ' : '–ê—Ä—Ö—ñ–≤–Ω—ñ'}
              </button>
            ))}
          </div>
        </div>

        {/* Loading —Å—Ç–∞–Ω */}
        {isLoading && (
          <div className="flex justify-center items-center py-12">
            <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
          </div>
        )}

        {/* –ü–æ–º–∏–ª–∫–∞ */}
        {error && (
          <div className="bg-red-50 border border-red-200 rounded-lg p-4">
            <p className="text-red-600">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—ñ–≤</p>
          </div>
        )}

        {/* –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç—ñ–≤ */}
        {!isLoading && !error && (
          <>
            {/* –Ø–∫—â–æ –Ω–µ–º–∞—î –ø—Ä–æ–µ–∫—Ç—ñ–≤ */}
            {projectsData?.projects.length === 0 && (
              <div className="text-center py-12">
                <div className="text-6xl mb-4">üìÅ</div>
                <h3 className="text-xl font-medium text-gray-900 mb-2">
                  {searchQuery ? '–ü—Ä–æ–µ–∫—Ç–∏ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ' : '–ù–µ–º–∞—î –ø—Ä–æ–µ–∫—Ç—ñ–≤'}
                </h3>
                <p className="text-gray-600 mb-4">
                  {searchQuery 
                    ? '–°–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø–æ—à—É–∫—É' 
                    : '–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–≤—ñ–π –ø–µ—Ä—à–∏–π –ø—Ä–æ–µ–∫—Ç —â–æ–± –ø–æ—á–∞—Ç–∏'}
                </p>
                {!searchQuery && (
                  <button
                    onClick={() => setIsCreateModalOpen(true)}
                    className="px-6 py-3 bg-blue-600 hover:bg-blue-700 
                               text-white rounded-lg font-medium"
                  >
                    –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç
                  </button>
                )}
              </div>
            )}

            {/* Grid –∑ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ */}
            {projectsData?.projects.length > 0 && (
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {projectsData.projects.map((project) => (
                  <ProjectCard
                    key={project.id}
                    project={project}
                    onClick={() => handleProjectClick(project.id)}
                    onEdit={() => {/* TODO: –≤—ñ–¥–∫—Ä–∏—Ç–∏ edit modal */}}
                    onDelete={() => handleDeleteProject(project.id)}
                  />
                ))}
              </div>
            )}

            {/* –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è */}
            {projectsData && projectsData.totalPages > 1 && (
              <div className="mt-8 flex justify-center gap-2">
                <button
                  onClick={() => setCurrentPage(p => Math.max(1, p - 1))}
                  disabled={currentPage === 1}
                  className="px-4 py-2 bg-white border border-gray-300 rounded-lg
                             disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  ‚Üê –ü–æ–ø–µ—Ä–µ–¥–Ω—è
                </button>
                
                <span className="px-4 py-2 bg-white border border-gray-300 rounded-lg">
                  –°—Ç–æ—Ä—ñ–Ω–∫–∞ {currentPage} –∑ {projectsData.totalPages}
                </span>
                
                <button
                  onClick={() => setCurrentPage(p => p + 1)}
                  disabled={currentPage === projectsData.totalPages}
                  className="px-4 py-2 bg-white border border-gray-300 rounded-lg
                             disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  –ù–∞—Å—Ç—É–ø–Ω–∞ ‚Üí
                </button>
              </div>
            )}
          </>
        )}
      </div>

      {/* Modal –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É */}
      <CreateProjectModal
        isOpen={isCreateModalOpen}
        onClose={() => setIsCreateModalOpen(false)}
        onSubmit={handleCreateProject}
        isLoading={createMutation.isLoading}
      />
    </div>
  )
}
```

**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

1. **React Query:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–ª—è –∫–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–≤—Ç–æ–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
2. **Debounce:** –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø–æ—à—É–∫—É - –∑–∞–ø–∏—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–µ –Ω–∞ –∫–æ–∂–µ–Ω —Å–∏–º–≤–æ–ª
3. **–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è:** –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É
4. **–ü–∞–≥—ñ–Ω–∞—Ü—ñ—è:** –†–æ–∑–±–∏—Ç—Ç—è –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è –≤–µ–ª–∏–∫–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –ø—Ä–æ–µ–∫—Ç—ñ–≤
5. **Empty state:** –ü—Ä–∏—î–º–Ω–∏–π UI –∫–æ–ª–∏ –Ω–µ–º–∞—î –¥–∞–Ω–∏—Ö
6. **Loading/Error states:** –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –≤—Å—ñ—Ö —Å—Ç–∞–Ω—ñ–≤
7. **Optimistic updates:** React Query –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î UI –ø—ñ—Å–ª—è –º—É—Ç–∞—Ü—ñ–π

---

## üîß Backend –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏

### üìÑ `/server/src/controllers/authController.ts`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä –¥–ª—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

#### –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä –∫–æ–¥—É:

```typescript
import { Request, Response } from 'express'
import { PrismaClient } from '@prisma/client'
import bcrypt from 'bcryptjs'
import jwt from 'jsonwebtoken'

const prisma = new PrismaClient()

/**
 * AuthController - –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
 * 
 * Endpoints:
 * - POST /api/auth/register - —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
 * - POST /api/auth/login - –≤—Ö—ñ–¥
 * - POST /api/auth/refresh - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É
 * - POST /api/auth/logout - –≤–∏—Ö—ñ–¥
 */
export class AuthController {
  
  /**
   * –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   * POST /api/auth/register
   * 
   * Body: { firstName, lastName, email, password }
   * Response: { user, accessToken, refreshToken }
   */
  async register(req: Request, res: Response) {
    try {
      // –û—Ç—Ä–∏–º—É—î–º–æ –¥–∞–Ω—ñ –∑ body
      const { firstName, lastName, email, password } = req.body

      // ---------- –í–ê–õ–Ü–î–ê–¶–Ü–Ø ----------
      
      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤
      if (!firstName || !lastName || !email || !password) {
        return res.status(400).json({
          error: '–í—Å—ñ –ø–æ–ª—è –æ–±–æ–≤\'—è–∑–∫–æ–≤—ñ'
        })
      }

      // –í–∞–ª—ñ–¥–∞—Ü—ñ—è email —Ñ–æ—Ä–º–∞—Ç—É
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
      if (!emailRegex.test(email)) {
        return res.status(400).json({
          error: '–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email'
        })
      }

      // –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—é (–º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤)
      if (password.length < 6) {
        return res.status(400).json({
          error: '–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ –º—ñ–Ω—ñ–º—É–º 6 —Å–∏–º–≤–æ–ª—ñ–≤'
        })
      }

      // ---------- –ü–ï–†–ï–í–Ü–†–ö–ê –ù–ê –Ü–°–ù–£–í–ê–ù–ù–Ø ----------
      
      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º email –≤–∂–µ —ñ—Å–Ω—É—î
      const existingUser = await prisma.user.findUnique({
        where: { email }
      })

      if (existingUser) {
        return res.status(409).json({
          error: '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º email –≤–∂–µ —ñ—Å–Ω—É—î'
        })
      }

      // ---------- –•–ï–®–£–í–ê–ù–ù–Ø –ü–ê–†–û–õ–Æ ----------
      
      // –ì–µ–Ω–µ—Ä—É—î–º–æ salt —Ç–∞ —Ö–µ—à—É—î–º–æ –ø–∞—Ä–æ–ª—å
      // 12 - —Ü–µ –∫—ñ–ª—å–∫—ñ—Å—Ç—å rounds (—á–∏–º –±—ñ–ª—å—à–µ, —Ç–∏–º –±–µ–∑–ø–µ—á–Ω—ñ—à–µ, –∞–ª–µ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ)
      const hashedPassword = await bcrypt.hash(password, 12)

      // ---------- –°–¢–í–û–†–ï–ù–ù–Ø –ö–û–†–ò–°–¢–£–í–ê–ß–ê ----------
      
      const user = await prisma.user.create({
        data: {
          firstName,
          lastName,
          email,
          password: hashedPassword,
          role: 'USER' // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ä–æ–ª—å USER
        },
        select: {
          // –í–∏–±–∏—Ä–∞—î–º–æ —Ç—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–æ–ª—è (–Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–∞—Ä–æ–ª—å!)
          id: true,
          firstName: true,
          lastName: true,
          email: true,
          role: true,
          createdAt: true
        }
      })

      // ---------- –ì–ï–ù–ï–†–ê–¶–Ü–Ø JWT –¢–û–ö–ï–ù–Ü–í ----------
      
      // Access token - –∫–æ—Ä–æ—Ç–∫–æ—á–∞—Å–Ω–∏–π (7 –¥–Ω—ñ–≤)
      const accessToken = jwt.sign(
        { userId: user.id, email: user.email, role: user.role },
        process.env.JWT_SECRET!,
        { expiresIn: '7d' }
      )

      // Refresh token - –¥–æ–≤–≥–æ—á–∞—Å–Ω–∏–π (30 –¥–Ω—ñ–≤)
      const refreshToken = jwt.sign(
        { userId: user.id },
        process.env.JWT_REFRESH_SECRET!,
        { expiresIn: '30d' }
      )

      // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ refresh token –≤ –ë–î
      await prisma.refreshToken.create({
        data: {
          token: refreshToken,
          userId: user.id,
          expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000) // 30 –¥–Ω—ñ–≤
        }
      })

      // ---------- –í–Ü–î–ü–û–í–Ü–î–¨ ----------
      
      return res.status(201).json({
        message: '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π',
        user,
        accessToken,
        refreshToken
      })

    } catch (error) {
      console.error('Register error:', error)
      return res.status(500).json({
        error: '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó'
      })
    }
  }

  /**
   * –í—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   * POST /api/auth/login
   * 
   * Body: { email, password }
   * Response: { user, accessToken, refreshToken }
   */
  async login(req: Request, res: Response) {
    try {
      const { email, password } = req.body

      // ---------- –í–ê–õ–Ü–î–ê–¶–Ü–Ø ----------
      
      if (!email || !password) {
        return res.status(400).json({
          error: 'Email —Ç–∞ –ø–∞—Ä–æ–ª—å –æ–±–æ–≤\'—è–∑–∫–æ–≤—ñ'
        })
      }

      // ---------- –ü–û–®–£–ö –ö–û–†–ò–°–¢–£–í–ê–ß–ê ----------
      
      const user = await prisma.user.findUnique({
        where: { email }
      })

      // –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
      if (!user) {
        return res.status(401).json({
          error: '–ù–µ–≤—ñ—Ä–Ω–∏–π email –∞–±–æ –ø–∞—Ä–æ–ª—å'
        })
      }

      // ---------- –ü–ï–†–ï–í–Ü–†–ö–ê –ü–ê–†–û–õ–Æ ----------
      
      // –ü–æ—Ä—ñ–≤–Ω—é—î–º–æ —Ö–µ—à –∑ –ë–î –∑ —Ö–µ—à–µ–º –≤–≤–µ–¥–µ–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—é
      const isPasswordValid = await bcrypt.compare(password, user.password)

      if (!isPasswordValid) {
        return res.status(401).json({
          error: '–ù–µ–≤—ñ—Ä–Ω–∏–π email –∞–±–æ –ø–∞—Ä–æ–ª—å'
        })
      }

      // ---------- –ì–ï–ù–ï–†–ê–¶–Ü–Ø –¢–û–ö–ï–ù–Ü–í ----------
      
      const accessToken = jwt.sign(
        { userId: user.id, email: user.email, role: user.role },
        process.env.JWT_SECRET!,
        { expiresIn: '7d' }
      )

      const refreshToken = jwt.sign(
        { userId: user.id },
        process.env.JWT_REFRESH_SECRET!,
        { expiresIn: '30d' }
      )

      // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω–æ–≤–∏–π refresh token
      await prisma.refreshToken.create({
        data: {
          token: refreshToken,
          userId: user.id,
          expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)
        }
      })

      // ---------- –í–Ü–î–ü–û–í–Ü–î–¨ ----------
      
      // –ù–µ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–∞—Ä–æ–ª—å!
      const { password: _, ...userWithoutPassword } = user

      return res.status(200).json({
        message: '–£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥',
        user: userWithoutPassword,
        accessToken,
        refreshToken
      })

    } catch (error) {
      console.error('Login error:', error)
      return res.status(500).json({
        error: '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≤—Ö–æ–¥—ñ'
      })
    }
  }

  /**
   * –û–Ω–æ–≤–ª–µ–Ω–Ω—è access —Ç–æ–∫–µ–Ω—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é refresh —Ç–æ–∫–µ–Ω—É
   * POST /api/auth/refresh
   * 
   * Body: { refreshToken }
   * Response: { accessToken, refreshToken }
   */
  async refresh(req: Request, res: Response) {
    try {
      const { refreshToken } = req.body

      if (!refreshToken) {
        return res.status(400).json({
          error: 'Refresh token –æ–±–æ–≤\'—è–∑–∫–æ–≤–∏–π'
        })
      }

      // ---------- –í–ï–†–ò–§–Ü–ö–ê–¶–Ü–Ø –¢–û–ö–ï–ù–£ ----------
      
      let decoded
      try {
        decoded = jwt.verify(refreshToken, process.env.JWT_REFRESH_SECRET!) as any
      } catch (err) {
        return res.status(401).json({
          error: '–ù–µ–≤—ñ—Ä–Ω–∏–π –∞–±–æ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π —Ç–æ–∫–µ–Ω'
        })
      }

      // ---------- –ü–ï–†–ï–í–Ü–†–ö–ê –í –ë–î ----------
      
      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ —Ç–æ–∫–µ–Ω —ñ—Å–Ω—É—î –≤ –ë–î —ñ –Ω–µ –≤–∏–¥–∞–ª–µ–Ω–∏–π
      const storedToken = await prisma.refreshToken.findFirst({
        where: {
          token: refreshToken,
          userId: decoded.userId,
          revoked: false
        }
      })

      if (!storedToken) {
        return res.status(401).json({
          error: '–¢–æ–∫–µ–Ω –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–±–æ –≤—ñ–¥–∫–ª–∏–∫–∞–Ω–æ'
        })
      }

      // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–µ—Ä–º—ñ–Ω—É –¥—ñ—ó
      if (storedToken.expiresAt < new Date()) {
        return res.status(401).json({
          error: '–¢–æ–∫–µ–Ω –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π'
        })
      }

      // ---------- –û–¢–†–ò–ú–ê–ù–ù–Ø –ö–û–†–ò–°–¢–£–í–ê–ß–ê ----------
      
      const user = await prisma.user.findUnique({
        where: { id: decoded.userId }
      })

      if (!user) {
        return res.status(404).json({
          error: '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ'
        })
      }

      // ---------- –ì–ï–ù–ï–†–ê–¶–Ü–Ø –ù–û–í–ò–• –¢–û–ö–ï–ù–Ü–í ----------
      
      const newAccessToken = jwt.sign(
        { userId: user.id, email: user.email, role: user.role },
        process.env.JWT_SECRET!,
        { expiresIn: '7d' }
      )

      const newRefreshToken = jwt.sign(
        { userId: user.id },
        process.env.JWT_REFRESH_SECRET!,
        { expiresIn: '30d' }
      )

      // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä–∏–π —Ç–æ–∫–µ–Ω
      await prisma.refreshToken.update({
        where: { id: storedToken.id },
        data: { revoked: true }
      })

      // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π
      await prisma.refreshToken.create({
        data: {
          token: newRefreshToken,
          userId: user.id,
          expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000)
        }
      })

      // ---------- –í–Ü–î–ü–û–í–Ü–î–¨ ----------
      
      return res.status(200).json({
        accessToken: newAccessToken,
        refreshToken: newRefreshToken
      })

    } catch (error) {
      console.error('Refresh error:', error)
      return res.status(500).json({
        error: '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ —Ç–æ–∫–µ–Ω—É'
      })
    }
  }

  /**
   * –í–∏—Ö—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
   * POST /api/auth/logout
   * 
   * Body: { refreshToken }
   * Response: { message }
   */
  async logout(req: Request, res: Response) {
    try {
      const { refreshToken } = req.body

      if (!refreshToken) {
        return res.status(400).json({
          error: 'Refresh token –æ–±–æ–≤\'—è–∑–∫–æ–≤–∏–π'
        })
      }

      // –í—ñ–¥–∫–ª–∏–∫–∞—î–º–æ —Ç–æ–∫–µ–Ω
      await prisma.refreshToken.updateMany({
        where: { token: refreshToken },
        data: { revoked: true }
      })

      return res.status(200).json({
        message: '–£—Å–ø—ñ—à–Ω–∏–π –≤–∏—Ö—ñ–¥'
      })

    } catch (error) {
      console.error('Logout error:', error)
      return res.status(500).json({
        error: '–ü–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ'
      })
    }
  }
}

export default new AuthController()
```

**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

1. **–ë–µ–∑–ø–µ–∫–∞ –ø–∞—Ä–æ–ª—ñ–≤:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è bcrypt –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è
2. **JWT —Ç–æ–∫–µ–Ω–∏:** Access (–∫–æ—Ä–æ—Ç–∫–æ—á–∞—Å–Ω–∏–π) + Refresh (–¥–æ–≤–≥–æ—á–∞—Å–Ω–∏–π)
3. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
4. **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫:** Try-catch –¥–ª—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
5. **–ü—Ä–∏–≤–∞—Ç–Ω—ñ—Å—Ç—å:** –ù—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–∞—Ä–æ–ª—å —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
6. **Refresh mechanism:** –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–Ω–æ–≤–∏—Ç–∏ —Ç–æ–∫–µ–Ω –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥—É

---

*–ü—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó —É –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ...*
